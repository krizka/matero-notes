<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <title>Micro CSS фреймворк</title>
    <meta name="description" content="microcss"/>
    <meta name="keywords" content="microcss"/>
    <link rel="stylesheet" type="text/css" href="/fonts/lato/lato.css">
    <link rel="stylesheet" type="text/css" href="/fonts/font-awesome/font-awesome.css">
</head>

<body>
{{>Layout}}
</body>

<template name="NavPartition">
    <li>
        <a id="set-partition" href="#">{{title}}</a>
    </li>
</template>

<template name="NavBar">
    <nav class="navbar">
        <ul class="main-nav">
            {{#each partitions}}
                {{>NavPartition}}
            {{/each}}
            <button id="add-partition" class="button button-action button-square button-tiny"><i class="fa fa-plus"></i>
            </button>
        </ul>
    </nav>
</template>

<template name="NavChapter">
    <li><a id="set-chapter" href="#">{{title}}</a>
        <button id="remove-chapter" class="button button-caution button-square button-tiny"><i class="fa fa-times"></i>
        </button>
    </li>
</template>

<template name="Section">
    <section class="aside_section">
        <h4 class="section_title"><span id="section-title">{{title}}</span>
            <button id="remove-section" class="button button-caution button-square button-tiny">
                <i class="fa fa-times"></i></button>
        </h4>
        <ul>
            {{#each chapters}}
                {{>NavChapter}}
            {{/each}}
        </ul>
        <a href="#" id="add-chapter" class="button button-tiny">добавить главку</a>
    </section>
</template>

<template name="ChapterBlock">
    <div class="item">
        <h5>{{title}}</h5>
        <p>{{content}}</p>
        <button id="edit-block" class="button button-action button-square button-tiny"><i class="fa fa-pencil"></i>
        </button>
        <button id="remove-block" class="button button-caution button-square button-tiny"><i class="fa fa-times"></i>
        </button>
    </div>
</template>

<template name="Partition">
    <h1 id="partition-title" contenteditable="{{editTitle}}">{{title}}</h1>
    <div class="grid">
        <aside class="col-3">
            {{#each sections}}
                {{>Section}}
            {{/each}}
            <a id="add-section" href="#" class="button">Добавить секцию</a>
        </aside>
        <div class="col-9">
            {{#if chapter}}
                <p><a href="#">{{title}}</a> / <a href="#">{{section.title}}</a> / <span>{{chapter.title}}</span></p>
                <h4 id="chapter-title" contenteditable="{{editChapterTitle}}">{{chapter.title}}</h4>
                {{#each chapter.blocks}}
                    {{>ChapterBlock}}
                {{/each}}

                <form id="add-block-form" action="">
                    <div class="add_item">
                        <input type="text" name="title" placeholder="Заголовок нового блока">
                        <textarea name="content" id="" cols="30" rows="10" placeholder="Текст нового блока"></textarea>
                        <input type="submit" value="Добавить">
                    </div>
                </form>
            {{/if}}
        </div>
    </div>
</template>

<template name="Layout">
    <div class="layout">
        <div class="body">
            <header class="main-header grid-middle">
                <div class="col-12">
                    {{>NavBar}}
                </div>
            </header>
            <main class="main">
                {{#if partition}}
                    {{>Partition partition}}
                {{/if}}
            </main>
        </div>
        <footer class="main-footer">2016 г.</footer>
    </div>
</template>